class: CommandLineTool
label: MuTect
baseCommand: ['python', '/opt/mutect.py']
requirements:
  - class: "DockerRequirement"
    dockerImageId: "mutect:1.1.5"
inputs:
  - id: "#tumor"
    type: File
    inputBinding:
      prefix: --input_file:tumor
      secondaryFiles:
        - .bai
  - id: "#normal"
    type: File
    inputBinding:
      prefix: --input_file:normal
      secondaryFiles:
        - .bai
  - id: "#reference"
    type: File
    inputBinding:
      prefix: --reference_sequence
      secondaryFiles:
        - .fai
        - ^.dict
  - id: "#cosmic"
    type: File
    inputBinding:
      prefix: --cosmic
  - id: "#dbsnp"
    type: File
    inputBinding:
      prefix: --dbsnp
  - id: "#tumor_lod"
    type: float
    default: 6.3
    inputBinding:
      prefix: --tumor_lod
  - id: "#initial_tumor_lod"
    type: float
    default: 4.0
    inputBinding:
      prefix: --initial_tumor_lod
  - id: "#out"
    type: string
    default: call_stats.txt
    inputBinding:
      prefix: --out
  - id: "#coverage_file"
    type: string
    default: coverage.wig.txt
    inputBinding:
      prefix: --coverage_file
  - id: "#vcf"
    type: string
    default: mutations.vcf
    inputBinding:
      prefix: --vcf

outputs:
  - id: "#coverage"
    type: File
    outputBinding:
      glob:
        engine: "cwl:JsonPointer"
        script: job/coverage_file

  - id: "#call_stats"
    type: File
    outputBinding:
      glob:
        engine: "cwl:JsonPointer"
        script: job/out
        
  - id: "#mutations"
    type: File
    outputBinding:
      glob:
        engine: "cwl:JsonPointer"
        script: job/vcf
